<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Writing to think 2: Write harder - security</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Writing to think 2: Write harder </a></h1>
                <nav><ul>
                    <li><a href="/category/commentary.html">Commentary</a></li>
                    <li><a href="/category/compliance-at-home.html">Compliance at home</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                    <li><a href="/category/projects.html">Projects</a></li>
                    <li><a href="/category/security.html">Security</a></li>
                    <li><a href="/category/uncategorized.html">Uncategorized</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/personal-container-cloud.html">personal container cloud</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-01-25T00:16:00-05:00">
                Published: Wed 25 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info --><p>Containers are real neat. I like how you can build a single thing that
contains a hunk of an application, and deploy both the initial version
and follow-on updates quickly. Containers are very easy to deploy to
any of a panoply of public clouds, but I want to host web apps for my
own use, containing my own data, on my own hardware.</p>
<p>And my hardware is a single box having an Athlon FX with eight cores,
8GB of RAM, and a couple of terabytes of mirrored spinning disks.</p>
<p>I've had my eye on OpenShift for a while now. It's a thing that can
build your code into containers, deploy the containers in various
slicey-dicey ways, and manage your web apps, including setting up DNS
so people can go to <a class="reference external" href="https://yourapp-you.openshift.example.com">https://yourapp-you.openshift.example.com</a> or some
such. I also looked at Deis, Rancher, and a couple of other whiz-bang
things. Besides a shocking loss of code diversity as everybody
scrambles to rebase everything on Kubernetes, what they have in common
is that the people who made them figure you must have at least three
beefy boxen to dedicate to your cloud, and more like a hundred, if you
are bothering to use their software. Oh, yes, try out our thing in a
Vagrant box, or run it as a container—but that's for developing,
debugging, kicking the tires; it might not remember things you told it
if you restart it.</p>
<p>Meanwhile, it seems that since I last checked, Docker has grown into
several products, rkt and appc have sprung up, and the Open Container
Initiative has begun (Gunnar and Dave let me in on that one). I'm
impressed with rkt and its attempts to be only one thing rather than
subsuming the world. In particular, I'm swayed by the case for using
systemd to manage containers rather than Docker's daemon. Perhaps,
like the time when PulseAudio stopped stuttering and started working,
this is systemd's moment to come into its own.</p>
<p>But everyone is building all their container networks on IPv4. How
silly! IPv6 is made for this sort of thing. I've only got one public
IPv4 address and it's dynamic. And what if I want to have fun with
containers that live on a darknet instead?</p>
<p>So here's what I've got so far on how to have fun running containers
on a single box.</p>
<blockquote>
<ol class="arabic">
<li><p class="first">Make a VM and install CoreOS Container Linux. (I got version
1248.4.0.) This entails getting the iso, constructing a cloud-config
file, making that into an iso, mounting it on the VM, and running
coreos-install with it. My cloud-config.yaml goes like:</p>
<pre class="literal-block">
#cloud-config
coreos:
  update:
    reboot-strategy: best-effort
ssh_authorized_keys:
  - &quot;ssh-rsa AAAA...&quot;
hostname: &quot;myhostname&quot;
</pre>
</li>
<li><p class="first">(coreos-install needs outbound https.) Once booted, the CoreOS box
obtains an address on my fd00::/16 local network. Add a firewall
rule to allow my internal box to ssh to it, and ssh
core&#64;myhostname. Find out the real 2001:db8::/48 IP, add another
firewall rule for ssh, add a DNS entry.</p>
</li>
<li><p class="first">Read about <a class="reference external" href="https://github.com/coreos/rkt/blob/6e3292bfa3d2d0238df3402ba9fe2f73327335f5/Documentation/networking/overview.md">rkt networking</a>
using CNI plugins. Create <tt class="docutils literal"><span class="pre">/etc/rkt/net.d/10-dmz.conf</span></tt> with
these contents:</p>
<pre class="literal-block">
{
  &quot;name&quot;: &quot;dmz&quot;,
  &quot;type&quot;: &quot;macvlan&quot;,
  &quot;master&quot;: &quot;eth0&quot;,
  &quot;ipam&quot;: {
    &quot;type&quot;: &quot;dhcp&quot;
  }
}
</pre>
</li>
<li><p class="first">Read about the dhcp plugin. Find
<tt class="docutils literal"><span class="pre">/usr/lib/rkt/stage1-images/stage1-coreos.aci</span></tt>. <tt class="docutils literal">rkt fetch</tt> that sucker as per the <a class="reference external" href="https://github.com/coreos/rkt/blob/6e3292bfa3d2d0238df3402ba9fe2f73327335f5/Documentation/networking/overview.md#dhcp">dhcp section</a>, then follow the rest of the directions.</p>
</li>
<li><p class="first">Run <tt class="docutils literal">sudo ./dhcp daemon</tt>. Ctrl-Z, bg.</p>
</li>
<li><p class="first"><tt class="docutils literal">sudo rkt run <span class="pre">--net=dmz</span> <span class="pre">--interactive</span>
<span class="pre">quay.io/coreos/alpine-sh</span></tt>. Inside the container, run <tt class="docutils literal">ip a</tt> and
see the unique IPv6 address.</p>
</li>
<li><p class="first"><tt class="docutils literal">sudo rkt gc <span class="pre">--grace-period=0s</span></tt> and watch the dhcp lease get
released.</p>
</li>
<li><p class="first">Wonder how to ever remember where that silly <tt class="docutils literal">/home/core/dhcp</tt>
executable came from; write silly manual directions.</p>
</li>
</ol>
</blockquote>
<p>Unanswered questions:</p>
<blockquote>
<ul class="simple">
<li>How can that dhcp thingy be made suitably repeatable or automatic?
Why isn't that part of CoreOS?</li>
<li>How can the containers update a DNS server with their IPv6
addresses?</li>
<li><a class="reference external" href="https://nonconformity.net/2016/06/10/onionboat-using-docker-for-easy-tor-hidden-services/">onionboat</a></li>
</ul>
</blockquote>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/netconf-and-the-curse-of-consensus.html" rel="bookmark"
                           title="Permalink to NETCONF and the curse of consensus">NETCONF and the curse of consensus</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-05-01T02:07:00-04:00">
                Published: Sun 01 May 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/commentary.html">Commentary</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info -->                <p>So my router runs OpenWRT, and its configuration is complicated enough
that I can't easily capture it all in one place, nor set up a new blank
router to do its job if need be. There are packages to install, UCI
settings to set, configuration files to put in ...</p>
                <a class="readmore" href="/netconf-and-the-curse-of-consensus.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/bro-2-4-1-on-openwrt.html" rel="bookmark"
                           title="Permalink to Bro 2.4.1 on OpenWRT">Bro 2.4.1 on OpenWRT</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-04-07T02:21:00-04:00">
                Published: Thu 07 April 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/security.html">Security</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info -->                <p>.</p>
<blockquote>
<p>&quot;Holy waffles if troubleshooting build errors in a large Autotools
mess isn’t the most hemorrhage-inducing activity known to mankind.&quot;</p>
<footer><p class="attribution">&mdash;<a class="reference external" href="http://inspirated.com/2015/06/08/release-bro-2-3-1-2-on-openwrt">krkhan</a></p>
</blockquote>
<blockquote>
</footer></blockquote>
<p>I've taken krkhan's
<a class="reference external" href="https://github.com/krkhan/openwrt-bro">packaging</a> of
<a class="reference external" href="https://www.bro.org/">Bro</a> 2.3.1 for
<a class="reference external" href="https://openwrt.org/">OpenWRT</a>, and <a class="reference external" href="https://github.com/jaredjennings/openwrt-bro/tree/update-to-2.4.1">updated
it</a>
to package Bro 2.4.1 on the present OpenWRT trunk. This was ...</p>
                <a class="readmore" href="/bro-2-4-1-on-openwrt.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/cmits-is-public.html" rel="bookmark"
                           title="Permalink to CMITS is public!">CMITS is public!</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-24T02:45:00-04:00">
                Published: Tue 24 March 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/compliance-at-home.html">Compliance at home</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info -->                <p>Configuration Management for Information Technology Systems (CMITS) is a
melding of Puppet, LaTeX and my own scripts that makes compliance with
hundreds of security requirements maintainable for me at work. And I've
obtained permission to release it. The initial release is made at
<a class="reference external" href="https://github.com/afseo/cmits">https://github.com/afseo/cmits</a>, in ...</p>
                <a class="readmore" href="/cmits-is-public.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/openwrt-stigs-automated-testing.html" rel="bookmark"
                           title="Permalink to Somebodyoughta: OpenWRT + STIGs + automated testing">Somebodyoughta: OpenWRT + STIGs + automated testing</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-10T05:06:00-04:00">
                Published: Fri 10 October 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/compliance-at-home.html">Compliance at home</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> <a href="/tag/somebodyoughta.html">somebodyoughta</a> </p>
</footer><!-- /.post-info -->                <p>Both a <a class="reference external" href="http://securityrules.info/about/xonib-cusyz-kyfek-gitox">Firewall
STIG</a> and a
<a class="reference external" href="http://securityrules.info/about/xumac-cabon-pilup-digax">Firewall
SRG</a> exist.
They require things like <a class="reference external" href="http://securityrules.info/about/xonib-cusyz-kyfek-gitox/SV-4582r3_rule">authentication for console
access</a>
and <a class="reference external" href="http://securityrules.info/about/xumac-cabon-pilup-digax/SRG-NET-000019-FW-000191_rule">suppressing router advertisements on external-facing IPv6
interfaces</a>.</p>
<p>Assuming I want my home router and network materially to comply with
these documents, I could go through them, manually configuring the
router as I ...</p>
                <a class="readmore" href="/openwrt-stigs-automated-testing.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/a-secret-sharing-app.html" rel="bookmark"
                           title="Permalink to Somebodyoughta: A secret sharing app">Somebodyoughta: A secret sharing app</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-01T04:38:00-04:00">
                Published: Wed 01 October 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/security.html">Security</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> <a href="/tag/somebodyoughta.html">somebodyoughta</a> </p>
</footer><!-- /.post-info -->                <p>I've recently read about secret-sharing protocols, where by means of
mathematics some secret bits can be distributed among some number of
people such that reconstructing the secret requires some size of quorum.
For example, say I've built a successful drink company. The recipe for
the drink is of ...</p>
                <a class="readmore" href="/a-secret-sharing-app.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/sagemincer.html" rel="bookmark"
                           title="Permalink to sagemincer">sagemincer</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-08-08T02:44:00-04:00">
                Published: Fri 08 August 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info -->                <p>If you've been reading my Compliance at Home series, you'll know that
the DoD releases security guidance in the form of STIGs. They're
downloadable as ZIP files, which contain ZIP files, which contain
checklists written in XCCDF, and stylesheets that can turn the XCCDF
document into HTML ...</p>
                <a class="readmore" href="/sagemincer.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/compliance-at-home-shortsighted.html" rel="bookmark"
                           title="Permalink to Compliance at home: Shortsighted">Compliance at home: Shortsighted</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-04-05T19:54:00-04:00">
                Published: Sat 05 April 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/compliance-at-home.html">Compliance at home</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info -->                <p>Two things happened to my compliance-at-home ideas this week:</p>
<p>1. Dave and Gunnar had a whole podcast episode about SCAP. I grudgingly
feel that it is cooler than I thought. The SCAP Security Guide project
in particular sounds like it is involving people from outside the
security area of expertise ...</p>
                <a class="readmore" href="/compliance-at-home-shortsighted.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/compliance-at-home-what-should-be-done.html" rel="bookmark"
                           title="Permalink to Compliance at home: What should be done">Compliance at home: What should be done</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-03-09T02:56:00-05:00">
                Published: Sun 09 March 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/compliance-at-home.html">Compliance at home</a>.</p>
<p>tags: <a href="/tag/chef.html">chef</a> <a href="/tag/disa.html">disa</a> <a href="/tag/nist.html">nist</a> <a href="/tag/puppet.html">puppet</a> <a href="/tag/security.html">security</a> <a href="/tag/standards.html">standards</a> </p>
</footer><!-- /.post-info -->                <p>Last time I shared my doubts about the applicability of the way security
configuration is being done to home administrators. So what do I think
we should all be doing instead of what NIST and DISA think we should be
doing?</p>
<p>These things: Describe security-related system configuration changes
using languages ...</p>
                <a class="readmore" href="/compliance-at-home-what-should-be-done.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/compliance-at-home-whats-being-done.html" rel="bookmark"
                           title="Permalink to Compliance at home: What's being done">Compliance at home: What's being done</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-03-07T05:47:00-05:00">
                Published: Fri 07 March 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/compliance-at-home.html">Compliance at home</a>.</p>
<p>tags: <a href="/tag/nist.html">nist</a> <a href="/tag/oval.html">oval</a> <a href="/tag/scap.html">scap</a> <a href="/tag/security.html">security</a> <a href="/tag/standards.html">standards</a> <a href="/tag/xccdf.html">xccdf</a> </p>
</footer><!-- /.post-info -->                <p>Last time I talked about the documents I've seen and used that contain
security requirements at various levels of detail, and I said I'd speak
more on what's being done to automate compliance, and what should be
done instead.</p>
<p>What's being done is <a class="reference external" href="http://scap.nist.gov/">SCAP</a>. This is ...</p>
                <a class="readmore" href="/compliance-at-home-whats-being-done.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/compliance-at-home.html" rel="bookmark"
                           title="Permalink to Compliance at home">Compliance at home</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-01-22T05:41:00-05:00">
                Published: Wed 22 January 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/compliance-at-home.html">Compliance at home</a>.</p>
<p>tags: <a href="/tag/disa.html">disa</a> <a href="/tag/nist.html">nist</a> <a href="/tag/security.html">security</a> <a href="/tag/srg.html">srg</a> <a href="/tag/standards.html">standards</a> <a href="/tag/stig.html">stig</a> </p>
</footer><!-- /.post-info -->                <p>I'm much more cognizant of the need for secure configuration of
operating system software everywhere than I've ever been in my life—and
at no time in my life have I had less time to worry about securing my
home computers.</p>
<p>The U.S. DoD and NIST have ...</p>
                <a class="readmore" href="/compliance-at-home.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>