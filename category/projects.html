<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Writing to think 2: Write harder - Projects</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Writing to think 2: Write harder </a></h1>
                <nav><ul>
                    <li><a href="/category/commentary.html">Commentary</a></li>
                    <li><a href="/category/compliance-at-home.html">Compliance at home</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                    <li class="active"><a href="/category/projects.html">Projects</a></li>
                    <li><a href="/category/security.html">Security</a></li>
                    <li><a href="/category/uncategorized.html">Uncategorized</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/personal-container-cloud.html">personal container cloud</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-01-25T00:16:00-05:00">
                Published: Wed 25 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info --><p>Containers are real neat. I like how you can build a single thing that
contains a hunk of an application, and deploy both the initial version
and follow-on updates quickly. Containers are very easy to deploy to
any of a panoply of public clouds, but I want to host web apps for my
own use, containing my own data, on my own hardware.</p>
<p>And my hardware is a single box having an Athlon FX with eight cores,
8GB of RAM, and a couple of terabytes of mirrored spinning disks.</p>
<p>I've had my eye on OpenShift for a while now. It's a thing that can
build your code into containers, deploy the containers in various
slicey-dicey ways, and manage your web apps, including setting up DNS
so people can go to <a class="reference external" href="https://yourapp-you.openshift.example.com">https://yourapp-you.openshift.example.com</a> or some
such. I also looked at Deis, Rancher, and a couple of other whiz-bang
things. Besides a shocking loss of code diversity as everybody
scrambles to rebase everything on Kubernetes, what they have in common
is that the people who made them figure you must have at least three
beefy boxen to dedicate to your cloud, and more like a hundred, if you
are bothering to use their software. Oh, yes, try out our thing in a
Vagrant box, or run it as a containerâ€”but that's for developing,
debugging, kicking the tires; it might not remember things you told it
if you restart it.</p>
<p>Meanwhile, it seems that since I last checked, Docker has grown into
several products, rkt and appc have sprung up, and the Open Container
Initiative has begun (Gunnar and Dave let me in on that one). I'm
impressed with rkt and its attempts to be only one thing rather than
subsuming the world. In particular, I'm swayed by the case for using
systemd to manage containers rather than Docker's daemon. Perhaps,
like the time when PulseAudio stopped stuttering and started working,
this is systemd's moment to come into its own.</p>
<p>But everyone is building all their container networks on IPv4. How
silly! IPv6 is made for this sort of thing. I've only got one public
IPv4 address and it's dynamic. And what if I want to have fun with
containers that live on a darknet instead?</p>
<p>So here's what I've got so far on how to have fun running containers
on a single box.</p>
<blockquote>
<ol class="arabic">
<li><p class="first">Make a VM and install CoreOS Container Linux. (I got version
1248.4.0.) This entails getting the iso, constructing a cloud-config
file, making that into an iso, mounting it on the VM, and running
coreos-install with it. My cloud-config.yaml goes like:</p>
<pre class="literal-block">
#cloud-config
coreos:
  update:
    reboot-strategy: best-effort
ssh_authorized_keys:
  - &quot;ssh-rsa AAAA...&quot;
hostname: &quot;myhostname&quot;
</pre>
</li>
<li><p class="first">(coreos-install needs outbound https.) Once booted, the CoreOS box
obtains an address on my fd00::/16 local network. Add a firewall
rule to allow my internal box to ssh to it, and ssh
core&#64;myhostname. Find out the real 2001:db8::/48 IP, add another
firewall rule for ssh, add a DNS entry.</p>
</li>
<li><p class="first">Read about <a class="reference external" href="https://github.com/coreos/rkt/blob/6e3292bfa3d2d0238df3402ba9fe2f73327335f5/Documentation/networking/overview.md">rkt networking</a>
using CNI plugins. Create <tt class="docutils literal"><span class="pre">/etc/rkt/net.d/10-dmz.conf</span></tt> with
these contents:</p>
<pre class="literal-block">
{
  &quot;name&quot;: &quot;dmz&quot;,
  &quot;type&quot;: &quot;macvlan&quot;,
  &quot;master&quot;: &quot;eth0&quot;,
  &quot;ipam&quot;: {
    &quot;type&quot;: &quot;dhcp&quot;
  }
}
</pre>
</li>
<li><p class="first">Read about the dhcp plugin. Find
<tt class="docutils literal"><span class="pre">/usr/lib/rkt/stage1-images/stage1-coreos.aci</span></tt>. <tt class="docutils literal">rkt fetch</tt> that sucker as per the <a class="reference external" href="https://github.com/coreos/rkt/blob/6e3292bfa3d2d0238df3402ba9fe2f73327335f5/Documentation/networking/overview.md#dhcp">dhcp section</a>, then follow the rest of the directions.</p>
</li>
<li><p class="first">Run <tt class="docutils literal">sudo ./dhcp daemon</tt>. Ctrl-Z, bg.</p>
</li>
<li><p class="first"><tt class="docutils literal">sudo rkt run <span class="pre">--net=dmz</span> <span class="pre">--interactive</span>
<span class="pre">quay.io/coreos/alpine-sh</span></tt>. Inside the container, run <tt class="docutils literal">ip a</tt> and
see the unique IPv6 address.</p>
</li>
<li><p class="first"><tt class="docutils literal">sudo rkt gc <span class="pre">--grace-period=0s</span></tt> and watch the dhcp lease get
released.</p>
</li>
<li><p class="first">Wonder how to ever remember where that silly <tt class="docutils literal">/home/core/dhcp</tt>
executable came from; write silly manual directions.</p>
</li>
</ol>
</blockquote>
<p>Unanswered questions:</p>
<blockquote>
<ul class="simple">
<li>How can that dhcp thingy be made suitably repeatable or automatic?
Why isn't that part of CoreOS?</li>
<li>How can the containers update a DNS server with their IPv6
addresses?</li>
<li><a class="reference external" href="https://nonconformity.net/2016/06/10/onionboat-using-docker-for-easy-tor-hidden-services/">onionboat</a></li>
</ul>
</blockquote>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/cyanostracon.html" rel="bookmark"
                           title="Permalink to cyanostracon">cyanostracon</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-11-02T23:19:35-04:00">
                Published: Wed 02 November 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p><a class="reference external" href="https://github.com/jaredjennings/darbrrb">darbrrb</a> is
well-developed and well-tested. I've made several backups with it. But
I've grown frustrated with how serial it is. I decided early on to
make it as simple as I could: it calls dar (so to be able to write
down exactly how dar was called inside ...</p>
                <a class="readmore" href="/cyanostracon.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/for-par1.html" rel="bookmark"
                           title="Permalink to for PAR1">for PAR1</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-02-07T05:42:00-05:00">
                Published: Sun 07 February 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>I looked in the source of parchive (which is only like 3500 lines of
code to par2cmdline's 13500 or so) and didn't find any evidence of the
flawed math that was in the original RS tutorial. I don't think parchive
is flawed at this point.</p>
<p>And it ...</p>
                <a class="readmore" href="/for-par1.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/for-and-against-par1.html" rel="bookmark"
                           title="Permalink to for and against PAR1">for and against PAR1</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-02-07T01:56:00-05:00">
                Published: Sun 07 February 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>PAR2 is better than PAR1. Why? Because it can deal with different-sized
input files, it can store different numbers of parity blocks in parity
files, and it can read parts of corrupt parity files.</p>
<p>But how does darbrrb use PAR2? Upon dar slice files that are all one
size. darbrrb ...</p>
                <a class="readmore" href="/for-and-against-par1.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/against-turbo-codes.html" rel="bookmark"
                           title="Permalink to against turbo codes">against turbo codes</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-02-06T15:12:00-05:00">
                Published: Sat 06 February 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>Upon reading a few more papers, I find that the reason people only
simulate turbo codes in software is because decoding them is so
computationally difficult that for the applications they are used in
(phones and TVs) people make custom silicon or write programs for DSPs
in order to decode ...</p>
                <a class="readmore" href="/against-turbo-codes.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/redundancy-file-format.html" rel="bookmark"
                           title="Permalink to redundancy file format">redundancy file format</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-02-06T04:09:00-05:00">
                Published: Sat 06 February 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>First, I'll collect the inspirations for this and the attributes I'd
like to be true of it.</p>
<p>par2 is the biggest inspiration. It shows how to make a file that will
work even if parts of it are corrupted, and which parts are needed. It
makes a lot ...</p>
                <a class="readmore" href="/redundancy-file-format.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/redundancy-files.html" rel="bookmark"
                           title="Permalink to redundancy files">redundancy files</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-02-06T01:32:00-05:00">
                Published: Sat 06 February 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>I've done some reading about various kinds of codes (thanks again,
Wikipedia). I've found that while Reed-Solomon is a good code, it takes
a lot of computation to encode as compared to some others. Most
interestingly, turbocodes seem faster and the patent on them just
expired in 2013 ...</p>
                <a class="readmore" href="/redundancy-files.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/darbrrb-three-years-later.html" rel="bookmark"
                           title="Permalink to darbrrb, three years later">darbrrb, three years later</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-02-02T04:32:00-05:00">
                Published: Tue 02 February 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>In 2013, I wrote <a class="reference external" href="https://github.com/jaredjennings/darbrrb">darbrrb</a>
to make redundant backups onto optical media using dar and par2. After
some testing I found par2 was so slow that backing up my files (a couple
of hundred gigabytes) would take more than a week, not counting the time
it takes to burn each ...</p>
                <a class="readmore" href="/darbrrb-three-years-later.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/backup-revelations.html" rel="bookmark"
                           title="Permalink to Backup revelations">Backup revelations</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-08-30T01:06:00-04:00">
                Published: Sun 30 August 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>While reading the code of par2cmdline (a month ago or something), I
think I apprehended that the number of input files and the number of
slices for the Reed-Solomon calculations are linked quite closely, and
that perhaps this was why the PAR2 file format moved to using 16-bit
Galois fields ...</p>
                <a class="readmore" href="/backup-revelations.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/backup.html" rel="bookmark"
                           title="Permalink to Backup">Backup</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-06-24T05:01:00-04:00">
                Published: Wed 24 June 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>At least temporarily, I've turned back to an old project to back up
files onto redundant arrays of optical discs.
<a class="reference external" href="https://github.com/jaredjennings/darbrrb/issues/2">activity</a>.</p>
<p>It looks like I can't both use the PAR2 file format and use Gibraltar,
which is a library that uses the GPU to calculate redundancy data really ...</p>
                <a class="readmore" href="/backup.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/push-generators-and-monads.html" rel="bookmark"
                           title="Permalink to Push generators and monads">Push generators and monads</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-06-01T03:19:00-04:00">
                Published: Mon 01 June 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>I wrote <a class="reference external" href="https://github.com/jaredjennings/shaney/">Shaney</a>
(<a class="reference external" href="https://github.com/jaredjennings/shaney/blob/master/requirements.txt">history</a>)
to parse important elements out of hundreds of text files (Puppet source
code and LaTeX), and produce interesting content out of them, writing it
into dozens of other text files (LaTeX). Now I'm trying to do much the
same thing for
<a class="reference external" href="https://gitlab.com/sagemincer/snailcrusader">snailcrusader</a>, but not
reading ...</p>
                <a class="readmore" href="/push-generators-and-monads.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/sagemincer-updates.html" rel="bookmark"
                           title="Permalink to sagemincer updates">sagemincer updates</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-09-27T21:43:00-04:00">
                Published: Sat 27 September 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>

</footer><!-- /.post-info -->                <p>When first released,
<a class="reference external" href="https://gitlab.com/sagemincer/sagemincer">sagemincer</a> was slow.
Like, thirty seconds to load a page slow. After a bunch of changes, now
it's fast enough to be far prouder of. Also I got a new domain for it,
<a class="reference external" href="http://securityrules.info/">securityrules.info</a>.</p>
<p>The way it got faster was this: I stopped trying to ...</p>
                <a class="readmore" href="/sagemincer-updates.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/sagemincer.html" rel="bookmark"
                           title="Permalink to sagemincer">sagemincer</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-08-08T02:44:00-04:00">
                Published: Fri 08 August 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>
<p>tags: <a href="/tag/security.html">security</a> </p>
</footer><!-- /.post-info -->                <p>If you've been reading my Compliance at Home series, you'll know that
the DoD releases security guidance in the form of STIGs. They're
downloadable as ZIP files, which contain ZIP files, which contain
checklists written in XCCDF, and stylesheets that can turn the XCCDF
document into HTML ...</p>
                <a class="readmore" href="/sagemincer.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/irons-in-the-fire.html" rel="bookmark"
                           title="Permalink to Irons in the fire">Irons in the fire</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-01-11T21:05:00-05:00">
                Published: Sat 11 January 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/jaredj.html">jaredj</a>
        </address>
<p>In <a href="/category/projects.html">Projects</a>.</p>
<p>tags: <a href="/tag/boot2gecko.html">boot2gecko</a> <a href="/tag/darbrrb.html">darbrrb</a> <a href="/tag/entropy.html">entropy</a> <a href="/tag/reorg.html">reorg</a> <a href="/tag/stigs.html">stigs</a> </p>
</footer><!-- /.post-info -->                <p>Right now, I'm:</p>
<ul class="simple">
<li>digitizing something like 100 LP records, in the highest-quality way
I can.</li>
<li>reviving an electric organ from the '60s as a MIDI keyboard
controller. (<a class="reference external" href="http://j.agrue.info/reorg">info</a>)</li>
<li>writing <a class="reference external" href="http://github.com/jaredjennings/darbrrb/">a script</a> to
back up files onto Blu-Ray discs using
<a class="reference external" href="http://dar.sourceforge.net/">dar</a> and
<a class="reference external" href="http://parchive.sourceforge.net/">par2</a>. (It's looking like it'll
be ...</li></ul>
                <a class="readmore" href="/irons-in-the-fire.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>